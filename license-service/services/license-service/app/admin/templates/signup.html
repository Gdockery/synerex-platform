<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Sign Up - Synerex Platform</title>
    <style>
      @keyframes gradientMove {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      /* Navigation Styles */
      .nav-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 50;
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-bottom: 1px solid #1f2937;
        height: 56px;
      }
      .nav-container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 24px;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .nav-logo {
        display: flex;
        align-items: center;
        text-decoration: none;
      }
      .nav-logo img {
        height: 48px;
        width: auto;
        filter: brightness(0) invert(1);
      }
      .nav-links {
        display: flex;
        gap: 24px;
        font-size: 14px;
      }
      .nav-links a {
        color: white;
        text-decoration: none;
        transition: color 0.2s;
      }
      .nav-links a:hover {
        color: #a855f7; /* purple-400 */
      }
      
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 24px;
        padding-top: 80px; /* Add padding for fixed nav */
        background: linear-gradient(135deg, #111827 0%, #1e3a8a 50%, #111827 100%);
        background-size: 400% 400%;
        animation: gradientMove 15s ease infinite;
        min-height: 100vh;
      }
      .container {
        max-width: 600px;
        margin: 40px auto;
        background: white;
        padding: 32px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }
      .logo-container {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
      }
      .logo-container img {
        height: 60px;
        max-width: 250px;
      }
      h1 {
        color: #1976d2;
        margin-top: 0;
        font-size: 1.25rem;
        line-height: 1.3;
      }
      .form-group {
        margin-bottom: 20px;
      }
      label {
        display: block;
        margin-bottom: 6px;
        font-weight: 500;
        color: #333;
      }
      input[type="text"],
      input[type="email"],
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        box-sizing: border-box;
      }
      input:focus, select:focus {
        outline: none;
        border-color: #1976d2;
      }
      .btn {
        background: #1976d2;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        width: 100%;
        margin-top: 10px;
      }
      .btn:hover {
        background: #1565c0;
      }
      .error {
        color: #b00020;
        background: #ffebee;
        padding: 12px;
        border-radius: 4px;
        margin-bottom: 20px;
      }
      .info {
        color: #666;
        font-size: 13px;
        margin-top: 4px;
      }
      .help-text {
        color: #666;
        font-size: 12px;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
      }
      a {
        color: #1976d2;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="nav-header">
      <div class="nav-container">
        <a href="{{ (website_url or 'http://localhost:5173') }}/" class="nav-logo">
          <img src="/static/synerex_logo_color.png" alt="Synerex Laboratories, LLC" />
        </a>
        <div class="nav-links">
          <a href="{{ (website_url or 'http://localhost:5173') }}/">Home</a>
          <a href="{{ (website_url or 'http://localhost:5173') }}/licensing">Licensing</a>
          <a href="{{ (website_url or 'http://localhost:5173') }}/my-account">My Account</a>
          <a href="{{ (website_url or 'http://localhost:5173') }}/contact">Contact</a>
        </div>
      </div>
    </nav>
    
    <div class="container">
      <div class="logo-container">
        <img src="/static/synerex_logo_color.png" alt="Synerex" />
      </div>
      <h1 style="text-align: center;">
        Software Registration & Licensing Form
      </h1>
      <p style="color: #666; text-align: center;">Create your organization and get started with Synerex EM&V or Tracking services.</p>
      
      {% if error %}
      <div class="error">{{ error }}</div>
      {% endif %}
      
      <form method="post" action="/register">
        <div class="form-group">
          <label for="org_name">Organization Name *</label>
          <input type="text" id="org_name" name="org_name" required placeholder="e.g., ACME Power Solutions"/>
          <div class="info">Your organization's display name</div>
        </div>
        
        <div class="form-group">
          <label for="org_type">Registration Type *</label>
          <select id="org_type" name="org_type" required>
            <option value="">Select type...</option>
            <option value="pe">Licensed PE (Professional Engineer)</option>
            <option value="customer">Licensee</option>
          </select>
          <div class="info">Licensed PE: For Professional Engineers reviewing utility submissions. Licensee: For organizations using tracking services.</div>
        </div>
        
        <!-- PE-specific fields (shown conditionally) -->
        <div id="pe-fields" style="display: none;">
          <div class="form-group">
            <label for="pe_license_number">PE License Number *</label>
            <input type="text" id="pe_license_number" name="pe_license_number" placeholder="e.g., PE12345-CA">
            <div class="info">Your Professional Engineer license number</div>
          </div>
          
          <div class="form-group">
            <label for="pe_license_state">PE License State *</label>
            <select id="pe_license_state" name="pe_license_state">
              <option value="">Select State</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
              <option value="DC">District of Columbia</option>
            </select>
            <div class="info">State where your PE license is issued</div>
          </div>
        </div>
        
        <!-- Address Fields (shown for both PE and Licensee) -->
        <div id="address-fields">
          <div class="form-group" style="margin-top: 24px;">
            <h3 style="margin-top: 0; margin-bottom: 15px; color: #1976d2; font-size: 16px; border-bottom: 1px solid #ddd; padding-bottom: 8px;">Company/Billing Address</h3>
            
            <div class="form-group">
              <label for="company_address">Company Address *</label>
              <input type="text" id="company_address" name="company_address" required placeholder="Street address"/>
              <div class="info">Your company's billing address</div>
            </div>
            
            <div class="form-group">
              <label for="company_city">City *</label>
              <input type="text" id="company_city" name="company_city" required placeholder="City"/>
            </div>
            
            <div class="form-group">
              <label for="company_state">State *</label>
              <select id="company_state" name="company_state" required>
                <option value="">Select State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
                <option value="DC">District of Columbia</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="company_zip">ZIP Code *</label>
              <input type="text" id="company_zip" name="company_zip" required placeholder="12345" pattern="[0-9]{5}(-[0-9]{4})?" title="5 or 9 digit ZIP code"/>
            </div>
            
            <div class="form-group">
              <label for="company_phone">Phone *</label>
              <input type="tel" id="company_phone" name="company_phone" required placeholder="(555) 123-4567"/>
            </div>
            
            <div class="form-group">
              <label for="company_cell">Cell Phone</label>
              <input type="tel" id="company_cell" name="company_cell" placeholder="(555) 123-4567"/>
              <div class="info">Optional</div>
            </div>
          </div>
          
          <div class="form-group" style="margin-top: 24px;">
            <h3 style="margin-top: 0; margin-bottom: 15px; color: #1976d2; font-size: 16px; border-bottom: 1px solid #ddd; padding-bottom: 8px;">Physical Address</h3>
            <p class="info" style="margin-bottom: 15px;">If different from company address (optional)</p>
            
            <div class="form-group">
              <label for="physical_address">Physical Address</label>
              <input type="text" id="physical_address" name="physical_address" placeholder="Street address"/>
            </div>
            
            <div class="form-group">
              <label for="physical_city">City</label>
              <input type="text" id="physical_city" name="physical_city" placeholder="City"/>
            </div>
            
            <div class="form-group">
              <label for="physical_state">State</label>
              <select id="physical_state" name="physical_state">
                <option value="">Select State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
                <option value="DC">District of Columbia</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="physical_zip">ZIP Code</label>
              <input type="text" id="physical_zip" name="physical_zip" placeholder="12345" pattern="[0-9]{5}(-[0-9]{4})?" title="5 or 9 digit ZIP code"/>
            </div>
            
            <div class="form-group">
              <label for="physical_phone">Phone</label>
              <input type="tel" id="physical_phone" name="physical_phone" placeholder="(555) 123-4567"/>
            </div>
            
            <div class="form-group">
              <label for="physical_cell">Cell Phone</label>
              <input type="tel" id="physical_cell" name="physical_cell" placeholder="(555) 123-4567"/>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="username">Username *</label>
          <input type="text" id="username" name="username" required placeholder="Choose a username" pattern="[a-zA-Z0-9_]{3,20}" title="3-20 characters, letters, numbers, and underscores only"/>
          <div class="info">This will be your login username (3-20 characters, letters, numbers, and underscores only)</div>
        </div>
        
        <div class="form-group">
          <label for="password">Password *</label>
          <input type="password" id="password" name="password" required placeholder="Choose a secure password" minlength="8"/>
          <div class="info">Minimum 8 characters</div>
        </div>
        
        <div class="form-group">
          <label for="password_confirm">Confirm Password *</label>
          <input type="password" id="password_confirm" name="password_confirm" required placeholder="Re-enter your password"/>
          <div class="info">Must match your password</div>
        </div>
        
        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" id="email" name="email" required placeholder="your.email@example.com"/>
          <div class="info">Required for registration notifications</div>
        </div>
        
        <!-- Software License Agreement (for Licensee) -->
        <div class="form-group" id="software-license-agreement" style="display: none; margin-top: 24px; padding: 16px; background: #f5f5f5; border-radius: 4px; border: 1px solid #ddd;">
          <h3 style="margin-top: 0; color: #1976d2; font-size: 16px;">Software License Agreement</h3>
          
          <div style="max-height: 300px; overflow-y: auto; padding: 12px; background: white; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 16px; font-size: 13px; line-height: 1.6;">
            <p><strong>SYNEREX LABORATORIES, LLC SOFTWARE LICENSE AGREEMENT</strong></p>
            <p><strong>Version 2026.01</strong></p>
            
            <p><strong>1. GRANT OF LICENSE</strong></p>
            <p>Subject to the terms and conditions of this Agreement, Synerex Laboratories, LLC ("Licensor") grants to you ("Licensee") a non-exclusive, non-transferable license to use the Synerex software products (the "Software") in accordance with the terms of this Agreement.</p>
            
            <p><strong>2. RESTRICTIONS</strong></p>
            <p>Licensee shall not: (a) copy, modify, or create derivative works of the Software; (b) reverse engineer, decompile, or disassemble the Software; (c) rent, lease, or sublicense the Software; (d) remove or alter any proprietary notices on the Software.</p>
            
            <p><strong>3. TERM AND TERMINATION</strong></p>
            <p>This Agreement is effective until terminated. Licensor may terminate this Agreement immediately if Licensee breaches any term. Upon termination, Licensee must cease all use of the Software.</p>
            
            <p><strong>4. WARRANTY DISCLAIMER</strong></p>
            <p>THE SOFTWARE IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND. LICENSOR DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</p>
            
            <p><strong>5. LIMITATION OF LIABILITY</strong></p>
            <p>IN NO EVENT SHALL LICENSOR BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF OR RELATED TO THIS AGREEMENT.</p>
            
            <p><strong>6. GOVERNING LAW</strong></p>
            <p>This Agreement shall be governed by the laws of the State of Texas, United States, without regard to conflict of law principles.</p>
            
            <p><strong>7. ENTIRE AGREEMENT</strong></p>
            <p>This Agreement constitutes the entire agreement between the parties regarding the Software and supersedes all prior agreements.</p>
            
            <p style="margin-top: 16px;"><em>By checking the box below, you acknowledge that you have read, understood, and agree to be bound by the terms of this Software License Agreement.</em></p>
          </div>
          
          <label style="display: flex; align-items: flex-start; cursor: pointer; font-weight: 500;">
            <input 
              type="checkbox" 
              id="agreement_accepted" 
              name="agreement_accepted" 
              style="margin-right: 8px; margin-top: 4px; flex-shrink: 0;"
            />
            <span>I have read and agree to the Software License Agreement above. <strong style="color: #b00020;">*</strong></span>
          </label>
        </div>
        
        <!-- Licensed PE Registration Agreement (for PE) -->
        <div class="form-group" id="pe-registration-agreement" style="display: none; margin-top: 24px; padding: 16px; background: #f5f5f5; border-radius: 4px; border: 1px solid #ddd;">
          <h3 style="margin-top: 0; color: #1976d2; font-size: 16px;">Licensed Professional Engineer Registration Agreement</h3>
          
          <div style="max-height: 300px; overflow-y: auto; padding: 12px; background: white; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 16px; font-size: 13px; line-height: 1.6;">
            <p><strong>SYNEREX LABORATORIES, LLC LICENSED PE REGISTRATION AGREEMENT</strong></p>
            <p><strong>Version 2026.01</strong></p>
            
            <p><strong>1. REGISTRATION PURPOSE</strong></p>
            <p>By registering as a Licensed Professional Engineer ("PE") with Synerex Laboratories, LLC ("Synerex"), you are requesting access to review utility submission reports for rebate programs. This registration does not grant you a software license, but rather authorizes you to review and evaluate utility submission reports submitted through the Synerex platform.</p>
            
            <p><strong>2. PE CREDENTIALS</strong></p>
            <p>You represent and warrant that: (a) you hold a valid Professional Engineer license in the state indicated; (b) your license is current and in good standing; (c) you will maintain your PE license in good standing throughout your registration period; and (d) you will notify Synerex immediately if your PE license status changes.</p>
            
            <p><strong>3. REVIEW RESPONSIBILITIES</strong></p>
            <p>As a registered Licensed PE, you agree to: (a) review utility submission reports in accordance with applicable professional engineering standards; (b) maintain confidentiality of all information accessed through the Synerex platform; (c) use the platform solely for the purpose of reviewing utility submissions; and (d) comply with all applicable laws and regulations governing professional engineering practice.</p>
            
            <p><strong>4. ADMINISTRATIVE APPROVAL</strong></p>
            <p>Your registration is subject to administrative approval by Synerex. Synerex reserves the right to approve or reject any PE registration at its sole discretion. Upon approval, you will be notified via email and granted access to review utility submission reports.</p>
            
            <p><strong>5. TERM AND TERMINATION</strong></p>
            <p>This registration is effective until terminated by either party. Synerex may terminate your registration immediately if: (a) your PE license is revoked or suspended; (b) you breach any term of this Agreement; or (c) Synerex determines, in its sole discretion, that termination is necessary.</p>
            
            <p><strong>6. CONFIDENTIALITY</strong></p>
            <p>You agree to maintain the confidentiality of all utility submission reports and related information accessed through the Synerex platform. You shall not disclose, copy, or distribute any such information without prior written authorization from Synerex and the applicable utility or organization.</p>
            
            <p><strong>7. LIMITATION OF LIABILITY</strong></p>
            <p>IN NO EVENT SHALL SYNEREX BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF OR RELATED TO YOUR USE OF THE PLATFORM FOR REVIEWING UTILITY SUBMISSIONS.</p>
            
            <p><strong>8. GOVERNING LAW</strong></p>
            <p>This Agreement shall be governed by the laws of the State of Texas, United States, without regard to conflict of law principles.</p>
            
            <p style="margin-top: 16px;"><em>By checking the box below, you acknowledge that you have read, understood, and agree to be bound by the terms of this Licensed PE Registration Agreement.</em></p>
          </div>
          
          <label style="display: flex; align-items: flex-start; cursor: pointer; font-weight: 500;">
            <input 
              type="checkbox" 
              id="pe_agreement_accepted" 
              name="agreement_accepted" 
              style="margin-right: 8px; margin-top: 4px; flex-shrink: 0;"
            />
            <span>I have read and agree to the Licensed PE Registration Agreement above. <strong style="color: #b00020;">*</strong></span>
          </label>
        </div>
        
        <button type="submit" class="btn" id="submit-button">Register</button>
      </form>
      
      <div class="help-text" id="help-text">
        <p><strong>What happens next?</strong></p>
        <ul style="margin: 8px 0; padding-left: 20px; color: #666;" id="help-list">
          <li>Select a registration type to see next steps</li>
        </ul>
        <p style="margin-top: 16px;">
          <a href="/admin/login">Admin Login</a> | 
          <a href="/docs">API Documentation</a>
        </p>
      </div>
    </div>
    
    <script>
      const orgTypeSelect = document.getElementById('org_type');
      const peFields = document.getElementById('pe-fields');
      const peLicenseNumber = document.getElementById('pe_license_number');
      const peLicenseState = document.getElementById('pe_license_state');
      const softwareAgreement = document.getElementById('software-license-agreement');
      const peAgreement = document.getElementById('pe-registration-agreement');
      const agreementCheckbox = document.getElementById('agreement_accepted');
      const peAgreementCheckbox = document.getElementById('pe_agreement_accepted');
      const submitButton = document.getElementById('submit-button');
      const helpText = document.getElementById('help-text');
      const helpList = document.getElementById('help-list');
      
      orgTypeSelect.addEventListener('change', function() {
        if (this.value === 'pe') {
          // Show PE fields
          peFields.style.display = 'block';
          peLicenseNumber.required = true;
          peLicenseState.required = true;
          // Show PE agreement, hide software license agreement
          softwareAgreement.style.display = 'none';
          peAgreement.style.display = 'block';
          agreementCheckbox.required = false;
          peAgreementCheckbox.required = true;
          submitButton.textContent = 'Register as Licensed PE';
          // Update help text
          helpList.innerHTML = `
            <li>Your Licensed PE registration will be submitted for admin approval</li>
            <li>You'll be notified via email once your registration is reviewed</li>
            <li>Once approved, you'll be able to review utility submission reports for rebate programs</li>
          `;
        } else if (this.value === 'customer') {
          // Hide PE fields
          peFields.style.display = 'none';
          peLicenseNumber.required = false;
          peLicenseState.required = false;
          // Show software license agreement, hide PE agreement
          softwareAgreement.style.display = 'block';
          peAgreement.style.display = 'none';
          agreementCheckbox.required = true;
          peAgreementCheckbox.required = false;
          submitButton.textContent = 'Register';
          // Update help text
          helpList.innerHTML = `
            <li>Your organization account will be created</li>
            <li>You'll be able to log in and select licenses from your My Account page</li>
            <li>After registration, visit My Account to browse and purchase licenses</li>
          `;
        } else {
          // Hide all conditional fields
          peFields.style.display = 'none';
          softwareAgreement.style.display = 'none';
          peAgreement.style.display = 'none';
          helpList.innerHTML = '<li>Select a registration type to see next steps</li>';
        }
      });
      
      // Password confirmation validation
      const passwordField = document.getElementById('password');
      const passwordConfirmField = document.getElementById('password_confirm');
      
      function validatePasswordMatch() {
        if (passwordConfirmField.value && passwordField.value !== passwordConfirmField.value) {
          passwordConfirmField.setCustomValidity('Passwords do not match');
        } else {
          passwordConfirmField.setCustomValidity('');
        }
      }
      
      passwordField.addEventListener('input', validatePasswordMatch);
      passwordConfirmField.addEventListener('input', validatePasswordMatch);
    </script>
  </body>
</html>

